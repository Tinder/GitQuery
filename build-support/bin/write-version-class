#!/usr/bin/env bash

scriptDir=$( cd "$(dirname "${BASH_SOURCE[0]}")" || exit 1 ; pwd -P )

propertiesFile=gradle.properties

function getProperty {
    PROP_KEY=$1
    PROP_VALUE=`cat $propertiesFile | grep "$PROP_KEY" | cut -d'=' -f2`
    echo $PROP_VALUE
}

version=$(getProperty "VERSION_NAME")

cat > core/src/main/kotlin/com/tinder/gitquery/core/GitQueryVersion.kt <<- EOM
package com.tinder.gitquery.core

/**
 * This file was generated by ${BASH_SOURCE[0]}
 */

const val GIT_QUERY_VERSION = "$version"
EOM